# Lexicon files sources: UTwente + CGN train (t and s) texts
# Use the following commands to use the G2P tool of webservices to obatin your custom lexicon:
#
# 1. Create a file: exe.sh and include the commands at the end of this file.
# 2. Execution: chmod 700 exe.sh && nohup time exe.sh &
# 3. After generating the final lexicon file, you need to set its path
# to the variable: "lexicon_file" in the file "run.sh" (absolute path)
#


## COPY AND PASTE THE FOLLOWING LINES INTO A SHELL SCRIPT: exe.sh
#!/bin/bash
CLAMUSER=<change-value>
CLAMPWD=<change-value>

output=/vol/tensusers4/ctejedor/lanewcristianmachine/opt/kaldi/egs/kaldi_egs_CGN/s5/wordlists2/
final_lexicon=$output/lexicon.txt
root_folder=/home/ctejedor/python-scripts
mkdir -p $output $root_folder
lexi_project=$root_folder/lexiconator
git clone https://github.com/cristiantg/lexiconator $lexi_project
## Make sure the file: $lexi_project/prepare_lexicon.py has REPLACE_AMPERSAND=' -en- '
## vi $lexi_project/local/prepare_lexicon.py
python3 $lexi_project/uber_script.py $CLAMUSER $CLAMPWD $lexi_project 0 0 "" wordlists/lexi1.txt $lexi_project/output1
python3 $lexi_project/uber_script.py $CLAMUSER $CLAMPWD $lexi_project 0 0 "" wordlists/lexi2.txt $lexi_project/output2
cat $lexi_project/output1/results-final/lexicon.txt $lexi_project/output2/results-final/lexicon.txt > $final_lexicon
sed -i '/^$/d' $final_lexicon